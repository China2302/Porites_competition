---
title: "Integrating Data"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(tidyverse)

#trinotate_data <- read_tsv("raw_data/trinotate_annotation_report_nogenes.xls")

trinotate_data <- read_tsv("raw_data/trinotate_annotation_report_with_genes.xls") %>% rename(gene_id=`#gene_id`)


counts <- read_tsv("raw_data/03-counts.txt") %>% rename(ClusterID=X1)

clusters <- read_tsv("raw_data/03-clusters.txt",col_names = c("transcript_id","ClusterID"))

joined_data <- counts %>% left_join(clusters,by="ClusterID") %>% left_join(trinotate_data,by="transcript_id")

aggfun <- function(x){
  paste(unique(x),collapse=";")
}

tmp <- joined_data %>% head(10000) %>% group_by(ClusterID) %>% summarise_all(aggfun)


```